<?xml version="1.0" encoding="UTF-8"?>
<ui:composition 
  xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" 
  template="/WEB-INF/templates/forum.xhtml">

  <ui:define name="pageTitle">Forum</ui:define>
  <ui:define name="head">
  </ui:define>
  <ui:define name="content">
    <h:form>
      <h:panelGroup layout="block" id="forum-index" styleClass="forum-index">
          <h3>
            <span class="forum-nav-item">Forum</span>
          </h3>
          <div class="forum-index-forums">
          <ui:repeat var="category" value="#{forumIndexBackingBean.categories}">
            <ui:repeat var="forum" value="#{forumIndexBackingBean.getForums(category)}">
              <div class="forum-index-forum">
                <div class="forum-index-forum-name">
                  <h:outputLink value="#{forum.urlName}">#{forum.name}</h:outputLink>
                  <div class="forum-message-count-container">
                    <span>Total Posts: </span>
                    <span class="forum-message-count">#{forumIndexBackingBean.getForumPostCount(forum)}</span>
                  </div>
                  <div class="forum-topic-count-container">
                    <span>Total Topics: </span>
                    <span class="forum-topic-count">#{forumIndexBackingBean.getForumTopicCount(forum)}</span>
                  </div>                  
                  <div class="forum-last-message-container">
                    <span>Last Message: </span>
                    <span class="forum-last-message">
                      <h:outputText value="#{forumIndexBackingBean.getLastMessageDate(forum)}">
                        <f:convertDateTime/>
                      </h:outputText></span>
                  </div>                  
                </div>
                <div class="forum-index-forum-description">#{forum.description}</div>
              </div>
            </ui:repeat>
          </ui:repeat>
        </div>
        
      </h:panelGroup>
    </h:form>    
  </ui:define>

</ui:composition>
