<?xml version="1.0" encoding="UTF-8"?>
<ui:composition 
  xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" 
  template="/WEB-INF/templates/forum.xhtml">

  <ui:define name="pageTitle">#{locales['forum.index.pageTitle']}</ui:define>
  <ui:define name="head">
    <!-- View Specific -->

    <link rel="StyleSheet" type="text/css" href="#{request.contextPath}/themes/novus/css/forum.css"/>  
  </ui:define>
  <ui:define name="content">
    <h:form>
      <h:panelGroup layout="block" id="forum-index" styleClass="forum-index">
          <h3>
            <span class="forum-nav-item">#{locales['forum.index.navItemForum']}</span>
          </h3>
          <div class="forum-index-forums">
          <ui:repeat var="category" value="#{forumIndexBackingBean.categories}">
            <ui:repeat var="forum" value="#{forumIndexBackingBean.getForums(category)}">
              <div class="forum-index-forum">
                <div class="forum-index-forum-name">
                  <h:outputLink value="#{forum.urlName}">#{forum.name}</h:outputLink>
                  <div class="forum-message-count-container">
                    <span class="forum-message-count">
                      <h:outputFormat value="#{locales['forum.index.totalPosts']}">
                        <f:param value="#{forumIndexBackingBean.getForumPostCount(forum)}"/>
                      </h:outputFormat>
                    </span>
                  </div>
                  <div class="forum-topic-count-container">
                    <span class="forum-topic-count">
                      <h:outputFormat value="#{locales['forum.index.totalTopics']}">
                        <f:param value="#{forumIndexBackingBean.getForumTopicCount(forum)}"/>
                      </h:outputFormat>
                    </span>
                  </div>                  
                  <div class="forum-last-message-container">
                    <span class="forum-last-message">
                      <h:outputFormat value="#{locales['forum.index.lastMessage']}">
                        <f:param value="#{forumIndexBackingBean.getLastMessageDate(forum)}"/>
                      </h:outputFormat>
                    </span>
                  </div>                  
                </div>
                <div class="forum-index-forum-description">#{forum.description}</div>
              </div>
            </ui:repeat>
          </ui:repeat>
        </div>
        
      </h:panelGroup>
    </h:form>    
  </ui:define>

</ui:composition>
