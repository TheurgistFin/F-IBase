<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="/WEB-INF/templates/users.xhtml">
    
    <ui:define name="metadata">
      <f:event type="preRenderView" listener="#{loginBackingBean.preRenderViewListener}"/>
    </ui:define>
 
    <ui:define name="pageTitle">
      #{locales['users.login.pageTitle']}
    </ui:define>
    
    <ui:define name="head">
      <!-- jQuery UI -->
    
      <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.3/jquery-ui.js"></script>
    
      <!-- md5 -->

      <script type="text/javascript" charset="utf8" src="http://cdn.jsdelivr.net/jshash/2.2/md5-min.js"></script>

      <!-- View specific -->

      <h:outputScript name="scripts/gui/users/login.js" target="head"/>
      <link rel="StyleSheet" type="text/css" href="#{request.contextPath}/themes/novus/css/login.css"/>

    </ui:define>
    
    <ui:define name="content">
      <div class="login-container">
        <div class="internal-login-container">
          <h2>
            #{locales['users.login.forgeAndIllusionLoginTitle']}
          </h2>
          <div class="internal-login-form-container">
            <h:form>
              <div>
                <h:outputLabel value="#{locales['users.login.emailTitle']}" />
                <h:inputText value="#{loginBackingBean.loginEmail}" id="email" required="true" requiredMessage="#{locales['users.login.loginEmailRequired']}"/>
              </div>

              <div>
                <h:outputLabel value="#{locales['users.login.passwordTitle']}" />
                <h:inputSecret id="password"/>
                <h:inputHidden value="#{loginBackingBean.loginPassword}" id="password-encoded"/>
              </div>
              
              <div>
                <h:commandButton action="#{loginBackingBean.login}" value="#{locales['users.login.loginButton']}" />
              </div>
            </h:form>
          </div>

          <a href="javascript:void(null);" id="forgot-password-link">#{locales['users.login.forgotPassword']}</a>
        </div>
        
        <div class="register-container">
          <h2>
            #{locales['users.login.createAccountTitle']}
          </h2>
          <div class="register-form-container">
            <h:form>
              <div>
                <h:outputLabel value="#{locales['users.login.firstNameTitle']}"/>
                <h:inputText value="#{loginBackingBean.registerFirstName}"/>
              </div>
              
              <div>
                <h:outputLabel value="#{locales['users.login.lastNameTitle']}"/>
                <h:inputText value="#{loginBackingBean.registerLastName}" required="true" requiredMessage="#{locales['users.login.registrationFirstNameRequired']}"/>
              </div>
              
              <div>
                <h:outputLabel value="#{locales['users.login.emailTitle']}"/>
                <h:inputText value="#{loginBackingBean.registerEmail}" required="true" requiredMessage="#{locales['users.login.registrationEmailRequired']}"/>
              </div>
              
              <div>
                <h:outputLabel value="#{locales['users.login.passwordTitle']}"/>
                <h:inputSecret value="#{loginBackingBean.registerPassword1}" required="true" requiredMessage="#{locales['users.login.registrationPasswordRequired']}"/>
              </div>
              
              <div>
                <h:outputLabel value="#{locales['users.login.retypePasswordTitle']}"/>
                <h:inputSecret value="#{loginBackingBean.registerPassword2}"/>
              </div>
              
              <div>
                <h:commandButton action="#{loginBackingBean.register}" value="#{locales['users.login.registerButton']}" />
              </div>
            </h:form>          
          </div>
        </div>
        
        <div class="external-login-container">
          <h2>
            #{locales['users.login.externalLoginTitle']}
          </h2>

          <div class="external-login-form-container">
            <div class="login-link-container login-google-container">
              <a class="login-link login-google-icon" href="?loginMethod=GOOGLE"> 
                <span class="login-icon login-google-icon">&#160;</span> 
                <span class="login-text login-google-text">#{locales['users.login.loginWithGoogle']}</span>
              </a>
            </div>
      
            <div class="login-link-container login-yahooo-container">
              <a class="login-link login-yahoo-icon" href="?loginMethod=YAHOO"> 
                <span class="login-icon login-yahoo-icon">&#160;</span> 
                <span class="login-text login-yahoo-text">#{locales['users.login.loginWithYahoo']}</span>
              </a>
            </div>
      
            <div class="login-link-container login-facebook-container">
              <a class="login-link login-facebook-icon" href="?loginMethod=FACEBOOK"> 
                <span class="login-icon login-facebook-icon">&#160;</span> 
                <span class="login-text login-facebook-text">#{locales['users.login.loginWithFacebook']}</span>
              </a>
            </div>
          </div>

        </div>
      </div>
      
      <div id="forgot-password-form-container" style="display: none" >
        <h:form>
          <h:inputHidden id="email" value="#{loginBackingBean.forgotPasswordEmail}" />
          <h:commandButton id="send-button" action="#{loginBackingBean.sendResetMail}"></h:commandButton>
        </h:form>
      </div>
    </ui:define>

</ui:composition>
