<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" template="/WEB-INF/templates/gamelibrary.xhtml">

  <ui:define name="pageTitle">#{locales['gamelibrary.createPublication.pageTitle']}</ui:define>
  <ui:define name="head">
    <!-- View specific -->
    
    <h:outputScript name="scripts/gui/gamelibrary/createpublication.js"></h:outputScript>
    <link rel="StyleSheet" type="text/css" href="#{request.contextPath}/themes/novus/css/editpublication.css"/>
  </ui:define>
  <ui:define name="content"> 
    <h:panelGroup layout="block" id="gamelibrary-create-publication" >
      <h:form styleClass="gamelibrary-create-publication-form">
        <div class="section">
          <h:outputLabel value="#{locales['gamelibrary.createPublication.typeLabel']}" />
          <div>
            <h:selectOneMenu>
              <f:selectItem itemLabel="#{locales['gamelibrary.createPublication.typeBook']}"/>
            </h:selectOneMenu>
          </div>
        </div>
        
        <div class="section">
          <h:outputLabel value="#{locales['gamelibrary.createPublication.nameLabel']}" for="name"/>
          <div>
            <h:inputText id="name" value="#{publicationCreateBackingBean.publicationName}" styleClass="max-width" required="true" requiredMessage="#{locales['gamelibrary.createPublication.nameRequired']}"/>
          </div>
        </div>
        
        <div class="section">
          <h:outputLabel value="#{locales['gamelibrary.createPublication.descriptionLabel']}" />
          <div>
            <h:inputTextarea id="description" value="#{publicationCreateBackingBean.publicationDescription}" rows="5" styleClass="max-width" required="true" requiredMessage="#{locales['gamelibrary.createPublication.descriptionRequired']}"/>
          </div>
        </div>
        
        <div class="section">
          <h:outputLabel value="#{locales['gamelibrary.createPublication.priceLabel']}" />
          <div>
            <h:inputText name="price" type="number" value="#{publicationCreateBackingBean.publicationPrice}" styleClass="max-width" required="true" requiredMessage="#{locales['gamelibrary.createPublication.priceRequired']}"/>
          </div>
        </div>
            
        <div class="section">
          <h:outputLabel value="#{locales['gamelibrary.createPublication.pdfLabel']}" />
          <div>
            <input type="file" name="file"/>
          </div>
        </div>
        
        <div class="section">
          <h:outputLabel value="#{locales['gamelibrary.createPublication.tagsLabel']}" />
          <div>
            <h:selectOneMenu id="tag-select">
              <f:selectItems value="#{publicationCreateBackingBean.tagSelectItems}" />
            </h:selectOneMenu>
            
            <div class="new-tag-container">        
              <label>#{locales['gamelibrary.createPublication.newTagLabel']}</label> 
              <div class="max-width">
                <input type="text" value="" name="new-tag"/>
                <a class="add-new-tag" href="javascript:void(null);">#{locales['gamelibrary.createPublication.addTag']}</a>
              </div>
            </div>
            
          </div>
          <div class="tags">
            <h:inputHidden id="tags" value="#{publicationCreateBackingBean.publicationTags}" />
          </div>
        </div>
        
        <div class="section">
          <h:outputLabel value="#{locales['gamelibrary.createPublication.licenseLabel']}" />
          <div>
            <h:selectOneMenu value="#{publicationCreateBackingBean.licenseType}" id="license-select" required="true" requiredMessage="#{locales['gamelibrary.createPublication.licenseRequired']}">
              <f:selectItems value="#{publicationCreateBackingBean.licenseSelectItems}"></f:selectItems>
            </h:selectOneMenu>
            <div class="license-cc-container">
              <h:outputLabel value="#{locales['gamelibrary.createPublication.licenseCreativeCommonsAllowModifications']}" />
              <h:selectOneRadio value="#{publicationCreateBackingBean.creativeCommonsDerivatives}">
                <f:selectItem itemLabel="#{locales['gamelibrary.createPublication.licenseCreativeCommonsAllowModificationsYes']}" itemValue="YES"/>
                <f:selectItem itemLabel="#{locales['gamelibrary.createPublication.licenseCreativeCommonsAllowModificationsNo']}" itemValue="NO"/>
                <f:selectItem itemLabel="#{locales['gamelibrary.createPublication.licenseCreativeCommonsAllowModificationsShare']}" itemValue="SHARE_ALIKE"/>
              </h:selectOneRadio>
              <h:outputLabel value="#{locales['gamelibrary.createPublication.licenseCreativeCommonsAllowCommercial']}" />
              <h:selectOneRadio value="#{publicationCreateBackingBean.creativeCommonsCommercial}">
                <f:selectItem itemLabel="#{locales['gamelibrary.createPublication.licenseCreativeCommonsAllowCommercialYes']}" itemValue="YES"/>
                <f:selectItem itemLabel="#{locales['gamelibrary.createPublication.licenseCreativeCommonsAllowCommercialNo']}" itemValue="NO"/>
              </h:selectOneRadio>
            </div>
  
            <div class="license-other" style="display: none">
              <h:outputLabel value="#{locales['gamelibrary.createPublication.linkToLicense']}" />
              <h:inputText value="#{publicationCreateBackingBean.licenseOther}" styleClass="max-width"/>
            </div>
          </div>
        </div>
    
        <div class="section">
          <h:outputLabel value="#{locales['gamelibrary.createPublication.authorsLabel']}" />
          <h:selectOneMenu id="author-select" styleClass="max-width">
            <f:selectItems value="#{publicationCreateBackingBean.authorSelectItems}"/>
          </h:selectOneMenu>
          <h:inputHidden id="author-ids" value="#{publicationCreateBackingBean.authorIds}" />
          <div class="authors-container"></div>
        </div>
    
        <div class="section">
          <h:outputLabel value="#{locales['gamelibrary.createPublication.settingsLabel']}" />
          <div>
            <h:selectBooleanCheckbox name="requires-delivery" value="#{publicationCreateBackingBean.publicationRequiresDelivery}" required="true"/>
            <h:outputLabel value="#{locales['gamelibrary.createPublication.requiredDeliveryLabel']}" />
          </div>
          <div>
            <h:selectBooleanCheckbox name="purchasable" value="#{publicationCreateBackingBean.publicationPurchasable}" required="true"/>
            <h:outputLabel value="#{locales['gamelibrary.createPublication.purchasableLabel']}" />
          </div>
        </div>
    
        <div class="section">
          <h:outputLabel value="#{locales['gamelibrary.createPublication.detailsLabel']}" />
          <table class="details-table">
            <tr>
              <td><h:outputLabel value="#{locales['gamelibrary.createPublication.widthLabel']}" /></td><td><h:inputText name="width" value="#{publicationCreateBackingBean.publicationWidth}"/><span>mm</span></td>
            </tr>
            <tr>
              <td><h:outputLabel value="#{locales['gamelibrary.createPublication.heightLabel']}" /></td><td><h:inputText name="height" value="#{publicationCreateBackingBean.publicationHeight}"/><span>mm</span></td>
            </tr>
            <tr>
              <td><h:outputLabel value="#{locales['gamelibrary.createPublication.depthLabel']}" /></td><td><h:inputText name="depth" value="#{publicationCreateBackingBean.publicationDepth}"/><span>mm</span></td>
            </tr>
            <tr>
              <td><h:outputLabel value="#{locales['gamelibrary.createPublication.weightLabel']}" /></td><td><h:inputText name="weight" value="#{publicationCreateBackingBean.publicationWeight}"/><span>g</span></td>
            </tr>
          </table>
        </div>
  
        <h4>#{locales['gamelibrary.createPublication.bookOptionsLabel']}</h4>
        <div class="section">
          <table class="book-options-table">
            <tr>
              <td>
                <h:outputLabel value="#{locales['gamelibrary.createPublication.downloadableLabel']}" />
              </td>
              <td>
                <h:selectBooleanCheckbox name="downloadable" value="#{publicationCreateBackingBean.publicationDownloadable}"/>
              </td>
            </tr>
            <tr>
              <td><h:outputLabel value="#{locales['gamelibrary.createPublication.numberOfPagesLabel']}" /></td><td><h:inputText name="numberOfPages" value="#{publicationCreateBackingBean.bookNumberOfPages}"/></td>
            </tr>
          </table>
        </div>
        
        <h:commandButton id="submit-button" action="#{publicationCreateBackingBean.save}" value="#{locales['gamelibrary.createPublication.createButtonLabel']}">
          <f:ajax execute="@form" onevent="onJsfPublicationCreate" render=":create-publication-file-form"/>
        </h:commandButton>
      </h:form>
      
      <h:panelGroup layout="block" id="create-publication-file-form" style="display: none">
        <!-- 
        <iframe src="about:blank" width="0" height="0" name="_file_form_target_"></iframe>
        -->
        <form method="post" enctype="multipart/form-data" action="#{request.contextPath}/gamelibrary/publicationFiles/#{publicationCreateBackingBean.publicationId}"></form>
      </h:panelGroup>
    </h:panelGroup>
  </ui:define>
</ui:composition>