<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" 
  template="/WEB-INF/templates/gamelibrary.xhtml">

  <ui:define name="pageTitle">#{locales['gamelibrary.cart.pageTitle']}</ui:define>
  <ui:define name="head">
  
    <!-- View specific -->
    
    <link rel="StyleSheet" type="text/css" href="#{request.contextPath}/themes/novus/css/cart.css"/>
  
  </ui:define>
  <ui:define name="content">
    <h:panelGroup layout="block" id="gamelibrary-cart">
      <h3 class="gamelibrary-cart-title">
        <span>#{locales['gamelibrary.cart.shoppingCartTitle']}</span>
        <h:link outcome="/gamelibrary/index.jsf" value="#{locales['gamelibrary.cart.backToGameLibrary']}"/>
      </h3>
      <div class="gamelibrary-cart-contents">
        <div class="gamelibrary-cart-order-information">
          #{locales['gamelibrary.cart.orderInformation']}
        </div>
      
        <h:form id="gamelibrary-cart-form">
          <h:panelGroup layout="block" styleClass="gamelibrary-cart-items-container"> 
            <h4>#{locales['gamelibrary.cart.itemsLabel']}</h4>
            
            <div class="gamelibrary-cart-items-inner-container">
              <h:dataTable var="cartItem" value="#{shoppingCartBackingBean.shoppingCartItems}">
                <h:column>
                  <f:facet name="header">#{locales['gamelibrary.cart.itemsCountLabel']}</f:facet>
                  <h:inputText value="#{cartItem.count}">
                    <f:ajax render="@form"/>
                  </h:inputText>
                </h:column>
                <h:column>
                  <f:facet name="header">#{locales['gamelibrary.cart.itemsNameLabel']}</f:facet>
                  <h:outputText value="#{cartItem.name}"/>
                </h:column>
                <h:column>
                  <f:facet name="header">#{locales['gamelibrary.cart.itemsUnitPriceLabel']}</f:facet>
                  <h:outputText value="#{cartItem.price}"/>
                </h:column>
                <h:column>
                  <f:facet name="header">#{locales['gamelibrary.cart.itemsTotalPriceLabel']}</f:facet>
                  <h:outputText value="#{cartItem.totalPrice}"/>
                </h:column>
              </h:dataTable>
            </div>
          </h:panelGroup>
          
          <h:panelGroup layout="block" styleClass="gamelibrary-cart-payer-information">
            <h4>#{locales['gamelibrary.cart.payerContactInformationTitle']}</h4>
            
            <h:panelGroup layout="block" styleClass="gamelibrary-cart-payer-field">
              <h:outputLabel value="#{locales['gamelibrary.cart.payerFirstName']}" />
              <h:inputText value="#{shoppingCartBackingBean.payerFirstName}" required="true" requiredMessage="#{locales['gamelibrary.cart.payerFirstNameRequired']}"/>
            </h:panelGroup>
            
            <h:panelGroup layout="block" styleClass="gamelibrary-cart-payer-field">
              <h:outputLabel value="#{locales['gamelibrary.cart.payerLastName']}" />
              <h:inputText value="#{shoppingCartBackingBean.payerLastName}" required="true" requiredMessage="#{locales['gamelibrary.cart.payerLastNameRequired']}"/>
            </h:panelGroup>

            <h:panelGroup layout="block" styleClass="gamelibrary-cart-payer-field">
              <h:outputLabel value="#{locales['gamelibrary.cart.payerEmail']}" />
              <h:inputText value="#{shoppingCartBackingBean.payerEmail}" required="true" requiredMessage="#{locales['gamelibrary.cart.payerEmailRequired']}"/>
            </h:panelGroup>

            <h:panelGroup layout="block" styleClass="gamelibrary-cart-payer-field">
              <h:outputLabel value="#{locales['gamelibrary.cart.payerMobile']}" />
              <h:inputText value="#{shoppingCartBackingBean.payerMobile}" />
            </h:panelGroup>
            
            <h:panelGroup layout="block" styleClass="gamelibrary-cart-payer-field">
              <h:outputLabel value="#{locales['gamelibrary.cart.payerTelephone']}" />
              <h:inputText value="#{shoppingCartBackingBean.payerTelephone}"/>
            </h:panelGroup>
            
            <h:panelGroup layout="block" styleClass="gamelibrary-cart-payer-field">
              <h:outputLabel value="#{locales['gamelibrary.cart.payerStreetAddress']}" />
              <h:inputText value="#{shoppingCartBackingBean.payerStreetAddress}" required="true" requiredMessage="#{locales['gamelibrary.cart.payerStreetAddressRequired']}"/>
            </h:panelGroup>
            
            <h:panelGroup layout="block" styleClass="gamelibrary-cart-payer-field">
              <h:outputLabel value="#{locales['gamelibrary.cart.payerPostalCode']}" />
              <h:inputText value="#{shoppingCartBackingBean.payerPostalCode}" required="true" requiredMessage="#{locales['gamelibrary.cart.payerPostalCodeRequired']}"/>
            </h:panelGroup>
            
            <h:panelGroup layout="block" styleClass="gamelibrary-cart-payer-field">
              <h:outputLabel value="#{locales['gamelibrary.cart.payerPostalOffice']}" />
              <h:inputText value="#{shoppingCartBackingBean.payerPostalOffice}" required="true" requiredMessage="#{locales['gamelibrary.cart.payerPostalOfficeRequired']}"/>
            </h:panelGroup>
            
            <h:panelGroup layout="block" styleClass="gamelibrary-cart-payer-field">
              <h:outputLabel value="#{locales['gamelibrary.cart.payerCountry']}" />
              <h:selectOneMenu value="#{shoppingCartBackingBean.payerCountryId}">
                <f:selectItems value="#{shoppingCartBackingBean.countrySelectItems}"/>
                  <f:ajax render=":gamelibrary-cart"/>
                </h:selectOneMenu>
            </h:panelGroup>

          </h:panelGroup>
          
          <h:panelGroup layout="block" styleClass="gamelibrary-cart-delivery-method">
            <h4>#{locales['gamelibrary.cart.deliveryMethod']}</h4>
            <h:selectOneRadio value="#{shoppingCartBackingBean.deliveryMethodId}">
              <f:selectItems value="#{shoppingCartBackingBean.deliveryMethods}" var="deliveryMethod" itemLabel="#{deliveryMethod.name} (#{deliveryMethod.info})" itemValue="#{deliveryMethod.id}"/>
              <f:ajax render=":gamelibrary-cart"/>
            </h:selectOneRadio>
          </h:panelGroup>

          <h:panelGroup layout="block" styleClass="gamelibrary-cart-notes">
            <h4>#{locales['gamelibrary.cart.notes']}</h4>
            <h:inputTextarea value="#{shoppingCartBackingBean.notes}" />
          </h:panelGroup>   
          
          <div id="gamelibrary-cart-summary-container">
            <h4>#{locales['gamelibrary.cart.summary']}</h4>
            <div id="gamelibrary-cart-summary-items" class="gamelibrary-cart-summary-item">
              <h5>#{locales['gamelibrary.cart.summaryItemsLabel']}</h5>
              <span>
                <h:outputText value="#{shoppingCartBackingBean.itemCosts}" >
                  <f:convertNumber currencyCode="EUR" type="currency" />
                </h:outputText>
              </span>
            </div>
            <div id="gamelibrary-cart-summary-delivery" class="gamelibrary-cart-summary-item">
              <h5>#{locales['gamelibrary.cart.summaryDeliveryLabel']}</h5>
              <span>
                <h:outputText value="#{shoppingCartBackingBean.deliveryCosts}" >
                  <f:convertNumber currencyCode="EUR" type="currency" />
                </h:outputText>
              </span>
            </div>
            <div id="gamelibrary-cart-summary-tax" class="gamelibrary-cart-summary-item">
              <h5>#{locales['gamelibrary.cart.summaryTaxLabel']}</h5>
              <span>
                <h:outputText value="#{shoppingCartBackingBean.taxAmount}" >
                  <f:convertNumber currencyCode="EUR" type="currency" />
                </h:outputText>
              </span>
            </div>
            <div id="gamelibrary-cart-summary-total-price" class="gamelibrary-cart-summary-item">
              <h5>#{locales['gamelibrary.cart.summaryTotalLabel']}</h5>
              <span>
                <h:outputText value="#{shoppingCartBackingBean.netPrice}" >
                  <f:convertNumber currencyCode="EUR" type="currency" />
                </h:outputText>
              </span>
            </div>
          </div>
          
          <h:commandButton value="#{locales['gamelibrary.cart.proceedToCheckout']}" action="#{shoppingCartBackingBean.proceedToCheckout}" styleClass="gamelibrary-cart-submit"/>
          
        </h:form>
      </div>  
    </h:panelGroup>
  </ui:define>

</ui:composition>