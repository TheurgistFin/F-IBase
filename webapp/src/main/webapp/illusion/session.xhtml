<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

	<ui:composition template="/WEB-INF/templates/illusion.xhtml">
	  <ui:define name="content">
    
      <h:outputScript name="scripts/gui/illusion/session.js" target="head"/>
    
      <div id="illusionSessionSelectContainer">
        <h2>Select Illusion Session</h2>
        
        <div id="illusionUserSessionsListContainer">
          <h3>Your sessions</h3>
          
          <div id="illusionUserSessionsList">
            <h:form id="selectSession">
              <ui:repeat var="illusionSession" value="#{illusionSessionController.enterableSessions}">
                <div class="illusionSession">
                  <h:commandLink action="#{illusionSessionController.enterSession(illusionSession)}" value="#{illusionSession.name}" />
                </div>
              </ui:repeat>
            </h:form>
          </div>  
        </div>
        
        <div id="illusionCreateSessionContainer">
          <h2>Create new Illusion Session</h2>
          
          <h:form id="createSession">
            <fieldset class="formFields">
              <h:outputLabel for="name">
                Session Name              
              </h:outputLabel>
              <div class="formField formTextField">
                <div class="formFieldLabelContainer">
                  <h:inputText id="name"/>
                </div>
              </div>
            </fieldset>
                          
            <fieldset class="formButtons">
              <input type="submit" value="Create New Session" name="createSessionButton" class="formvalid"/>
            </fieldset>
          </h:form>
          
          <h:form id="hiddenEnterForm" style="display: none">
            <h:inputHidden id="sessionId" />
            <h:commandButton action="#{illusionSessionController.enterSession(illusionSessionController.findSessionById(param['hiddenEnterForm:sessionId']))}" />
          </h:form>
        </div>
        
        <!-- TODO: Public sessions, session invites -->
        
      </div>
      
    </ui:define>
  </ui:composition>

</html>